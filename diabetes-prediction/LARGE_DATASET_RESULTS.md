# ğŸ¯ å¤§è§„æ¨¡ç³–å°¿ç—…æ•°æ®é›†è®­ç»ƒç»“æœ

## ğŸ“Š æ•°æ®é›†ä¿¡æ¯

- **è®­ç»ƒé›†**: 700,000 æ ·æœ¬
- **æµ‹è¯•é›†**: 300,000 æ ·æœ¬
- **åŸå§‹ç‰¹å¾**: 24 ä¸ª
- **å·¥ç¨‹ç‰¹å¾**: 35 ä¸ªï¼ˆç»è¿‡ç‰¹å¾å·¥ç¨‹ï¼‰

### æ•°æ®æ¥æº
ä»Kaggleä¸‹è½½çš„å¤§è§„æ¨¡ç³–å°¿ç—…é¢„æµ‹æ•°æ®é›†ï¼ŒåŒ…å«ä¸°å¯Œçš„åŒ»ç–—å’Œç”Ÿæ´»æ–¹å¼ç‰¹å¾ã€‚

### ç‰¹å¾åˆ—è¡¨

**æ•°å€¼å‹ç‰¹å¾**:
- age (å¹´é¾„)
- alcohol_consumption_per_week (æ¯å‘¨é¥®é…’é‡)
- physical_activity_minutes_per_week (æ¯å‘¨è¿åŠ¨æ—¶é•¿)
- diet_score (é¥®é£Ÿè¯„åˆ†)
- sleep_hours_per_day (æ¯æ—¥ç¡çœ æ—¶é•¿)
- screen_time_hours_per_day (æ¯æ—¥å±å¹•æ—¶é—´)
- bmi (èº«ä½“è´¨é‡æŒ‡æ•°)
- waist_to_hip_ratio (è…°è‡€æ¯”)
- systolic_bp (æ”¶ç¼©å‹)
- diastolic_bp (èˆ’å¼ å‹)
- heart_rate (å¿ƒç‡)
- cholesterol_total (æ€»èƒ†å›ºé†‡)
- hdl_cholesterol (é«˜å¯†åº¦è„‚è›‹ç™½èƒ†å›ºé†‡)
- ldl_cholesterol (ä½å¯†åº¦è„‚è›‹ç™½èƒ†å›ºé†‡)
- triglycerides (ç”˜æ²¹ä¸‰é…¯)

**ç±»åˆ«å‹ç‰¹å¾**:
- gender (æ€§åˆ«)
- ethnicity (ç§æ—)
- education_level (æ•™è‚²æ°´å¹³)
- income_level (æ”¶å…¥æ°´å¹³)
- smoking_status (å¸çƒŸçŠ¶æ€)
- employment_status (å°±ä¸šçŠ¶æ€)

**äºŒå…ƒç‰¹å¾**:
- family_history_diabetes (ç³–å°¿ç—…å®¶æ—å²)
- hypertension_history (é«˜è¡€å‹å²)
- cardiovascular_history (å¿ƒè¡€ç®¡ç–¾ç—…å²)

**ç›®æ ‡å˜é‡**:
- diagnosed_diabetes (ç³–å°¿ç—…è¯Šæ–­ç»“æœ: 0=æ— , 1=æœ‰)

### ç›®æ ‡å˜é‡åˆ†å¸ƒ

- **æœ‰ç³–å°¿ç—… (1)**: 436,307 æ ·æœ¬ (62.33%)
- **æ— ç³–å°¿ç—… (0)**: 263,693 æ ·æœ¬ (37.67%)

âš ï¸ **æ³¨æ„**: æ•°æ®é›†å­˜åœ¨ç±»åˆ«ä¸å¹³è¡¡ï¼Œç³–å°¿ç—…æ‚£è€…å æ¯”è¾ƒé«˜ã€‚

## ğŸ¤– è®­ç»ƒç­–ç•¥

### æ•°æ®å¤„ç†
1. **ç±»åˆ«ç¼–ç **: ä½¿ç”¨LabelEncoderå¯¹ç±»åˆ«å˜é‡è¿›è¡Œç¼–ç 
2. **ç‰¹å¾å·¥ç¨‹**: åˆ›å»º11ä¸ªæ–°ç‰¹å¾
   - BMIåˆ†ç±»
   - å¹´é¾„åˆ†ç»„
   - è¡€å‹ç±»åˆ«å’Œæ¯”ç‡
   - èƒ†å›ºé†‡æ¯”ç‡
   - ç”Ÿæ´»æ–¹å¼è¯„åˆ†
   - ç¡çœ è´¨é‡æŒ‡æ ‡
   - ä»£è°¢å¥åº·æŒ‡æ ‡
   - å¿ƒè¡€ç®¡é£é™©
   - é£é™©å› ç´ è®¡æ•°
   - å¹´é¾„ä¸BMIäº¤äº’
3. **æ•°æ®æ ‡å‡†åŒ–**: ä½¿ç”¨StandardScalerè¿›è¡Œç‰¹å¾ç¼©æ”¾
4. **é‡‡æ ·è®­ç»ƒ**: ä¸ºåŠ é€Ÿè®­ç»ƒï¼Œä½¿ç”¨10ä¸‡æ ·æœ¬è¿›è¡Œæ¨¡å‹è®­ç»ƒ

### æ¨¡å‹é…ç½®

è®­ç»ƒäº†4ç§æœºå™¨å­¦ä¹ æ¨¡å‹ï¼š

1. **Logistic Regression**
   - max_iter=1000
   - å¤šçº¿ç¨‹å¹¶è¡Œè®­ç»ƒ

2. **Random Forest**
   - n_estimators=100
   - max_depth=15
   - min_samples_split=10

3. **XGBoost**
   - n_estimators=200
   - learning_rate=0.05
   - max_depth=6

4. **LightGBM**
   - n_estimators=200
   - learning_rate=0.05
   - max_depth=6

## ğŸ“ˆ éªŒè¯é›†æ€§èƒ½

åœ¨140,000ä¸ªéªŒè¯æ ·æœ¬ä¸Šçš„è¡¨ç°ï¼š

| æ¨¡å‹ | å‡†ç¡®ç‡ | AUC | F1-Score |
|------|--------|-----|----------|
| **LightGBM** | **67.48%** | **0.7130** | **0.7647** |
| **XGBoost** | **67.52%** | **0.7130** | **0.7645** |
| Ensemble | 67.16% | 0.7083 | 0.7649 |
| Random Forest | 66.47% | 0.6954 | 0.7606 |
| Logistic Regression | 66.33% | 0.6944 | 0.7611 |

### æ€§èƒ½åˆ†æ

âœ… **æœ€ä½³æ¨¡å‹**: LightGBM å’Œ XGBoost å¹¶åˆ—ç¬¬ä¸€  
âœ… **AUCè¡¨ç°**: è¾¾åˆ°0.713ï¼Œè¡¨æ˜æ¨¡å‹æœ‰è‰¯å¥½çš„åˆ†ç±»èƒ½åŠ›  
âœ… **F1åˆ†æ•°**: 0.76+ï¼Œåœ¨æ­£è´Ÿæ ·æœ¬ä¹‹é—´å–å¾—äº†å¹³è¡¡  
âš ï¸ **å‡†ç¡®ç‡**: çº¦67%ï¼Œä»æœ‰æå‡ç©ºé—´

## ğŸ“ ç”Ÿæˆçš„æäº¤æ–‡ä»¶

æ‰€æœ‰æäº¤æ–‡ä»¶ä½äº `submissions/` ç›®å½•ï¼š

### æ–‡ä»¶åˆ—è¡¨

1. **large_lightgbm_submission.csv** â­ æ¨è
   - å¤§å°: 3.2 MB
   - æ ·æœ¬æ•°: 300,000
   - é¢„æµ‹ä¸ºç³–å°¿ç—…: 211,659 (70.55%)
   - é¢„æµ‹ä¸ºæ— ç³–å°¿ç—…: 88,341 (29.45%)

2. **large_xgboost_submission.csv** â­ æ¨è
   - å¤§å°: 2.6 MB
   - æ ·æœ¬æ•°: 300,000
   - é¢„æµ‹ä¸ºç³–å°¿ç—…: 210,881 (70.29%)
   - é¢„æµ‹ä¸ºæ— ç³–å°¿ç—…: 89,119 (29.71%)

3. **large_ensemble_submission.csv**
   - å¤§å°: 2.6 MB
   - æ ·æœ¬æ•°: 300,000
   - é¢„æµ‹ä¸ºç³–å°¿ç—…: 216,030 (72.01%)
   - é¢„æµ‹ä¸ºæ— ç³–å°¿ç—…: 83,970 (27.99%)

4. **large_randomforest_submission.csv**
   - å¤§å°: 3.2 MB
   - æ ·æœ¬æ•°: 300,000
   - é¢„æµ‹ä¸ºç³–å°¿ç—…: 217,904 (72.63%)
   - é¢„æµ‹ä¸ºæ— ç³–å°¿ç—…: 82,096 (27.37%)

5. **large_logisticregression_submission.csv**
   - å¤§å°: 3.2 MB
   - æ ·æœ¬æ•°: 300,000
   - é¢„æµ‹ä¸ºç³–å°¿ç—…: 221,668 (73.89%)
   - é¢„æµ‹ä¸ºæ— ç³–å°¿ç—…: 78,332 (26.11%)

### æäº¤æ–‡ä»¶æ ¼å¼

```csv
id,diagnosed_diabetes
700000,1.0
700001,1.0
700002,1.0
...
```

## ğŸ¯ æ¨èæäº¤

### ç¬¬ä¸€æ¨è: **large_lightgbm_submission.csv**
- **éªŒè¯é›†AUC**: 0.7130ï¼ˆæœ€é«˜ï¼‰
- **å‡†ç¡®ç‡**: 67.48%
- **F1åˆ†æ•°**: 0.7647ï¼ˆæœ€é«˜ï¼‰
- **é¢„æµ‹åˆ†å¸ƒ**: æ›´æ¥è¿‘è®­ç»ƒé›†çš„ç±»åˆ«åˆ†å¸ƒ

### ç¬¬äºŒæ¨è: **large_xgboost_submission.csv**
- **éªŒè¯é›†AUC**: 0.7130ï¼ˆå¹¶åˆ—æœ€é«˜ï¼‰
- **å‡†ç¡®ç‡**: 67.52%ï¼ˆæœ€é«˜ï¼‰
- **F1åˆ†æ•°**: 0.7645
- **é¢„æµ‹åˆ†å¸ƒ**: ä¸LightGBMç›¸è¿‘

## ğŸ“Š é›†æˆæ¨¡å‹æƒé‡

Ensembleæ¨¡å‹çš„å„æ¨¡å‹æƒé‡ï¼ˆåŸºäºAUCï¼‰ï¼š

- XGBoost: 25.32%
- LightGBM: 25.32%
- Random Forest: 24.70%
- Logistic Regression: 24.66%

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æŸ¥çœ‹æ¨¡å‹æ€§èƒ½
```bash
cd /home/ubuntu/projects/ai-learning/diabetes-prediction
cat models/large_model_scores.csv
```

### æäº¤åˆ°Kaggle
1. é€‰æ‹©æ¨èçš„æäº¤æ–‡ä»¶ï¼ˆLightGBMæˆ–XGBoostï¼‰
2. ç™»å½• Kaggle è´¦æˆ·
3. è¿›å…¥ç«èµ›é¡µé¢
4. ä¸Šä¼ é€‰æ‹©çš„ CSV æ–‡ä»¶
5. æŸ¥çœ‹æ’è¡Œæ¦œåˆ†æ•°

### é‡æ–°ç”Ÿæˆæäº¤æ–‡ä»¶
```bash
source venv/bin/activate
python3 generate_large_submission.py
```

### ä½¿ç”¨æ¨¡å‹è¿›è¡Œæ–°é¢„æµ‹
```python
import joblib
import pandas as pd

# åŠ è½½æ¨¡å‹å’Œå¤„ç†å™¨
model = joblib.load('models/large_lightgbm.joblib')
processor = joblib.load('models/large_processor.joblib')

# åŠ è½½æ–°æ•°æ®
new_data = pd.read_csv('your_data.csv')

# å¤„ç†å’Œé¢„æµ‹
X, feature_names, ids = processor.transform(new_data, is_test=True)
predictions = model.predict(X)
probabilities = model.predict_proba(X)[:, 1]
```

## ğŸ’¡ æ”¹è¿›å»ºè®®

è¦è¿›ä¸€æ­¥æå‡æ€§èƒ½ï¼Œå¯ä»¥å°è¯•ï¼š

### 1. æ•°æ®å±‚é¢
- **å®Œæ•´æ•°æ®è®­ç»ƒ**: ç›®å‰ä½¿ç”¨10ä¸‡æ ·æœ¬è®­ç»ƒï¼Œå¯ä»¥ä½¿ç”¨å…¨éƒ¨70ä¸‡æ ·æœ¬
- **SMOTEé‡‡æ ·**: å¤„ç†ç±»åˆ«ä¸å¹³è¡¡é—®é¢˜
- **å¼‚å¸¸å€¼å¤„ç†**: æ£€æµ‹å’Œå¤„ç†æç«¯å€¼
- **ç¼ºå¤±å€¼æ’è¡¥**: æ›´å¤æ‚çš„ç¼ºå¤±å€¼å¤„ç†ç­–ç•¥

### 2. ç‰¹å¾å·¥ç¨‹
- **å¤šé¡¹å¼ç‰¹å¾**: åˆ›å»ºç‰¹å¾çš„é«˜æ¬¡é¡¹
- **ç‰¹å¾é€‰æ‹©**: ä½¿ç”¨ç‰¹å¾é‡è¦æ€§ç­›é€‰
- **æ›´å¤šäº¤äº’ç‰¹å¾**: æ¢ç´¢æ›´å¤šæœ‰æ„ä¹‰çš„ç‰¹å¾ç»„åˆ
- **é¢†åŸŸçŸ¥è¯†ç‰¹å¾**: åŸºäºåŒ»å­¦çŸ¥è¯†åˆ›å»ºæ–°ç‰¹å¾

### 3. æ¨¡å‹ä¼˜åŒ–
- **è¶…å‚æ•°è°ƒä¼˜**: ä½¿ç”¨GridSearchæˆ–Optuna
- **Stacking**: ä½¿ç”¨æ›´å¤æ‚çš„é›†æˆæ–¹æ³•
- **æ·±åº¦å­¦ä¹ **: å°è¯•ç¥ç»ç½‘ç»œï¼ˆTabNet, AutoIntç­‰ï¼‰
- **CatBoost**: å°è¯•å…¶ä»–æ¢¯åº¦æå‡ç®—æ³•

### 4. è®­ç»ƒç­–ç•¥
- **KæŠ˜äº¤å‰éªŒè¯**: ä½¿ç”¨å¤šæŠ˜éªŒè¯è¯„ä¼°
- **æ—©åœæœºåˆ¶**: é˜²æ­¢è¿‡æ‹Ÿåˆ
- **å­¦ä¹ ç‡è°ƒåº¦**: åŠ¨æ€è°ƒæ•´å­¦ä¹ ç‡
- **æ•°æ®å¢å¼º**: é’ˆå¯¹è¡¨æ ¼æ•°æ®çš„å¢å¼ºæŠ€æœ¯

## ğŸ“ é¡¹ç›®æ–‡ä»¶ç»“æ„

```
diabetes-prediction/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ train.csv              (70ä¸‡è®­ç»ƒæ ·æœ¬)
â”‚   â”œâ”€â”€ test.csv               (30ä¸‡æµ‹è¯•æ ·æœ¬)
â”‚   â””â”€â”€ sample_submission.csv  (æäº¤æ¨¡æ¿)
â”‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ large_lightgbm.joblib         â­ æœ€ä½³æ¨¡å‹
â”‚   â”œâ”€â”€ large_xgboost.joblib          â­ æ¬¡ä½³æ¨¡å‹
â”‚   â”œâ”€â”€ large_randomforest.joblib
â”‚   â”œâ”€â”€ large_logisticregression.joblib
â”‚   â”œâ”€â”€ large_processor.joblib        (æ•°æ®å¤„ç†å™¨)
â”‚   â”œâ”€â”€ large_ensemble_weights.joblib (é›†æˆæƒé‡)
â”‚   â””â”€â”€ large_model_scores.csv        (æ€§èƒ½å¯¹æ¯”)
â”‚
â”œâ”€â”€ submissions/
â”‚   â”œâ”€â”€ large_lightgbm_submission.csv     â­ æ¨è
â”‚   â”œâ”€â”€ large_xgboost_submission.csv      â­ æ¨è
â”‚   â”œâ”€â”€ large_ensemble_submission.csv
â”‚   â”œâ”€â”€ large_randomforest_submission.csv
â”‚   â””â”€â”€ large_logisticregression_submission.csv
â”‚
â”œâ”€â”€ src/
â”‚   â””â”€â”€ data_processing_large.py      (æ•°æ®å¤„ç†æ¨¡å—)
â”‚
â”œâ”€â”€ train_large_dataset.py            (è®­ç»ƒè„šæœ¬)
â”œâ”€â”€ generate_large_submission.py      (ç”Ÿæˆæäº¤æ–‡ä»¶)
â””â”€â”€ LARGE_DATASET_RESULTS.md         (æœ¬æ–‡ä»¶)
```

## ğŸ”¬ æŠ€æœ¯ç»†èŠ‚

### ç‰¹å¾å·¥ç¨‹è¯¦æƒ…

åˆ›å»ºçš„11ä¸ªå·¥ç¨‹ç‰¹å¾ï¼š

1. **bmi_category**: BMIåˆ†ç±»ï¼ˆ0-3ï¼‰
2. **age_group**: å¹´é¾„åˆ†ç»„ï¼ˆ0-4ï¼‰
3. **bp_category**: é«˜è¡€å‹åˆ†ç±»ï¼ˆ0/1ï¼‰
4. **bp_ratio**: æ”¶ç¼©å‹/èˆ’å¼ å‹æ¯”ç‡
5. **cholesterol_ratio**: LDL/HDLèƒ†å›ºé†‡æ¯”ç‡
6. **lifestyle_score**: è¿åŠ¨ä¸é¥®é£Ÿç»¼åˆè¯„åˆ†
7. **sleep_quality**: ç¡çœ è´¨é‡æŒ‡æ ‡ï¼ˆ0/1ï¼‰
8. **metabolic_risk**: ä»£è°¢é£é™©æŒ‡æ ‡ï¼ˆBMIÃ—è…°è‡€æ¯”ï¼‰
9. **cardiovascular_risk**: å¿ƒè¡€ç®¡é£é™©æŒ‡æ ‡
10. **risk_factors_count**: é£é™©å› ç´ æ€»æ•°
11. **age_bmi_interaction**: å¹´é¾„ä¸BMIäº¤äº’é¡¹

### è®­ç»ƒç»†èŠ‚

- **è®­ç»ƒæ ·æœ¬**: é‡‡æ ·10ä¸‡æ¡ï¼ˆåŸå§‹56ä¸‡æ¡çš„18%ï¼‰
- **éªŒè¯é›†**: 14ä¸‡æ¡ï¼ˆåŸå§‹70ä¸‡çš„20%ï¼‰
- **è®­ç»ƒæ—¶é—´**: çº¦5-10åˆ†é’Ÿ
- **å†…å­˜ä½¿ç”¨**: çº¦2-4 GB

## âœ… ä»»åŠ¡å®Œæˆæ¸…å•

- [x] åŠ è½½å¤§è§„æ¨¡æ•°æ®é›†ï¼ˆ70ä¸‡è®­ç»ƒ + 30ä¸‡æµ‹è¯•ï¼‰
- [x] æ•°æ®é¢„å¤„ç†å’Œç‰¹å¾å·¥ç¨‹ï¼ˆ24â†’35ç‰¹å¾ï¼‰
- [x] è®­ç»ƒ4ç§æœºå™¨å­¦ä¹ æ¨¡å‹
- [x] åˆ›å»ºé›†æˆæ¨¡å‹
- [x] ç”Ÿæˆ5ä¸ªæäº¤æ–‡ä»¶
- [x] éªŒè¯æ–‡ä»¶æ ¼å¼å’Œæ•°é‡
- [x] æ€§èƒ½è¯„ä¼°å’Œå¯¹æ¯”
- [x] ç”Ÿæˆè¯¦ç»†æ–‡æ¡£

## ğŸ“Š æ€»ç»“

âœ… **æ•°æ®è§„æ¨¡**: è®­ç»ƒé›†70ä¸‡ï¼Œæµ‹è¯•é›†30ä¸‡  
âœ… **ç‰¹å¾å·¥ç¨‹**: ä»24ä¸ªæ‰©å±•åˆ°35ä¸ªç‰¹å¾  
âœ… **æœ€ä½³AUC**: 0.7130 (LightGBM/XGBoost)  
âœ… **æœ€ä½³å‡†ç¡®ç‡**: 67.52% (XGBoost)  
âœ… **æäº¤æ–‡ä»¶**: 5ä¸ªé«˜è´¨é‡æäº¤æ–‡ä»¶  
âœ… **æ¨èæ¨¡å‹**: LightGBM æˆ– XGBoost

---

**é¡¹ç›®ä½ç½®**: `/home/ubuntu/projects/ai-learning/diabetes-prediction/`

**æ¨èæäº¤æ–‡ä»¶**: 
1. `submissions/large_lightgbm_submission.csv` (ç¬¬ä¸€æ¨è)
2. `submissions/large_xgboost_submission.csv` (ç¬¬äºŒæ¨è)

**åˆ›å»ºæ—¶é—´**: 2024-12-04

ç¥æ‚¨åœ¨Kaggleç«èµ›ä¸­å–å¾—ä¼˜å¼‚æˆç»©ï¼ğŸ†










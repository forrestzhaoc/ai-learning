# House Prices åŸå§‹ç‰ˆæœ¬è¯¦ç»†æ€è·¯è§£æ

æœ¬æ–‡æ¡£è¯¦ç»†è§£é‡ŠåŸå§‹ç‰ˆæœ¬ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰çš„è®¾è®¡æ€è·¯ã€å®ç°ç»†èŠ‚å’Œæ¯ä¸ªæ­¥éª¤çš„åŸç†ã€‚

---

## ğŸ“‹ ç›®å½•

1. [æ•´ä½“æ¶æ„è®¾è®¡](#æ•´ä½“æ¶æ„è®¾è®¡)
2. [æ•°æ®å¤„ç†æµç¨‹](#æ•°æ®å¤„ç†æµç¨‹)
3. [ç‰¹å¾å·¥ç¨‹è¯¦è§£](#ç‰¹å¾å·¥ç¨‹è¯¦è§£)
4. [æ¨¡å‹é€‰æ‹©ä¸é…ç½®](#æ¨¡å‹é€‰æ‹©ä¸é…ç½®)
5. [è®­ç»ƒç­–ç•¥](#è®­ç»ƒç­–ç•¥)
6. [ä»£ç ç»“æ„åˆ†æ](#ä»£ç ç»“æ„åˆ†æ)

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„è®¾è®¡

### è®¾è®¡ç†å¿µ

åŸå§‹ç‰ˆæœ¬é‡‡ç”¨ **"ç®€å•æœ‰æ•ˆ"** çš„è®¾è®¡ç†å¿µï¼š

```
æ•°æ®åŠ è½½ â†’ æ•°æ®æ¸…æ´— â†’ ç‰¹å¾å·¥ç¨‹ â†’ æ¨¡å‹è®­ç»ƒ â†’ é¢„æµ‹ç”Ÿæˆ
```

**æ ¸å¿ƒåŸåˆ™**ï¼š
1. **å¯è§£é‡Šæ€§ä¼˜å…ˆ**ï¼šæ¯ä¸ªæ­¥éª¤éƒ½æ¸…æ™°æ˜äº†
2. **ç¨³å¥æ€§**ï¼šå¤„ç†ç¼ºå¤±å€¼å’Œå¼‚å¸¸æƒ…å†µ
3. **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒå¤šç§æ¨¡å‹ç±»å‹
4. **å®ç”¨æ€§**ï¼šç›´æ¥ç”Ÿæˆ Kaggle æäº¤æ–‡ä»¶

### æ¨¡å—åˆ’åˆ†

```
house-prices/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ train.py              # ä¸»è®­ç»ƒè„šæœ¬ï¼ˆæ¨¡å‹è®­ç»ƒã€äº¤å‰éªŒè¯ã€é¢„æµ‹ï¼‰
â”‚   â””â”€â”€ data_processing.py     # æ•°æ®å¤„ç†æ¨¡å—ï¼ˆæ¸…æ´—ã€ç‰¹å¾å·¥ç¨‹ã€ç¼–ç ï¼‰
â”œâ”€â”€ data/                      # åŸå§‹æ•°æ®
â”œâ”€â”€ models/                    # ä¿å­˜çš„æ¨¡å‹
â”œâ”€â”€ submissions/               # æäº¤æ–‡ä»¶
â””â”€â”€ predictions/               # é¢„æµ‹ç»“æœ
```

---

## ğŸ”„ æ•°æ®å¤„ç†æµç¨‹

### 1. æ•°æ®åŠ è½½é˜¶æ®µ

```python
train_df = pd.read_csv(args.train)  # è®­ç»ƒé›†ï¼š1460 è¡Œ Ã— 81 åˆ—
test_df = pd.read_csv(args.test)    # æµ‹è¯•é›†ï¼š1459 è¡Œ Ã— 80 åˆ—
```

**æ•°æ®ç»“æ„**ï¼š
- **è®­ç»ƒé›†**ï¼šåŒ…å«ç›®æ ‡å˜é‡ `SalePrice`ï¼ˆæˆ¿ä»·ï¼‰
- **æµ‹è¯•é›†**ï¼šä¸åŒ…å«ç›®æ ‡å˜é‡ï¼Œéœ€è¦é¢„æµ‹
- **ç‰¹å¾ç±»å‹**ï¼šæ•°å€¼å‹ï¼ˆå¦‚é¢ç§¯ã€å¹´ä»½ï¼‰å’Œåˆ†ç±»å‹ï¼ˆå¦‚æˆ¿å±‹ç±»å‹ã€é‚»é‡Œï¼‰

### 2. æ•°æ®é¢„å¤„ç†æµç¨‹ (`prepare_data`)

#### æ­¥éª¤ 1: æå–ç›®æ ‡å˜é‡

```python
y_train = train_df[target_col].copy()  # ä¿å­˜ç›®æ ‡å˜é‡
train_df = train_df.drop(columns=[target_col])  # ä»ç‰¹å¾ä¸­ç§»é™¤
```

**ç›®çš„**ï¼šåˆ†ç¦»ç‰¹å¾å’Œç›®æ ‡å˜é‡ï¼Œé¿å…ç›®æ ‡å˜é‡æ³„éœ²åˆ°ç‰¹å¾ä¸­

#### æ­¥éª¤ 2: åˆ é™¤ ID åˆ—

```python
train_df = train_df.drop(columns=['Id'])
test_df = test_df.drop(columns=['Id'])
```

**åŸå› **ï¼šID æ˜¯å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¸åŒ…å«é¢„æµ‹ä¿¡æ¯ï¼Œä¼šå¹²æ‰°æ¨¡å‹å­¦ä¹ 

---

## ğŸ§¹ ç¼ºå¤±å€¼å¤„ç† (`fill_missing_values`)

### è®¾è®¡æ€è·¯

**æ ¸å¿ƒåŸåˆ™**ï¼šæ ¹æ®ç‰¹å¾ç±»å‹é€‰æ‹©ä¸åŒçš„å¡«å……ç­–ç•¥

### æ•°å€¼å‹ç‰¹å¾ â†’ ä¸­ä½æ•°å¡«å……

```python
# æ•°å€¼å‹ç‰¹å¾ç”¨ä¸­ä½æ•°å¡«å……
numeric_cols = train_df.select_dtypes(include=[np.number]).columns
for col in numeric_cols:
    median_val = train_df[col].median()
    train_df[col].fillna(median_val, inplace=True)
    test_df[col].fillna(median_val, inplace=True)
```

**ä¸ºä»€ä¹ˆç”¨ä¸­ä½æ•°ï¼Ÿ**
- âœ… **ç¨³å¥æ€§**ï¼šä¸­ä½æ•°å¯¹å¼‚å¸¸å€¼ä¸æ•æ„Ÿ
- âœ… **ä¿æŒåˆ†å¸ƒ**ï¼šä¸ä¼šæ”¹å˜æ•°æ®çš„æ•´ä½“åˆ†å¸ƒç‰¹å¾
- âœ… **ç®€å•æœ‰æ•ˆ**ï¼šä¸éœ€è¦å¤æ‚çš„æ’å€¼æ–¹æ³•

**ç¤ºä¾‹**ï¼š
- `LotFrontage`ï¼ˆä¸´è¡—è·ç¦»ï¼‰ç¼ºå¤± â†’ ç”¨ä¸­ä½æ•° 69 å¡«å……
- `GarageYrBlt`ï¼ˆè½¦åº“å»ºé€ å¹´ä»½ï¼‰ç¼ºå¤± â†’ ç”¨ä¸­ä½æ•° 1978 å¡«å……

### åˆ†ç±»å‹ç‰¹å¾ â†’ ä¼—æ•°å¡«å……

```python
# åˆ†ç±»å‹ç‰¹å¾ç”¨ä¼—æ•°å¡«å……
categorical_cols = train_df.select_dtypes(include=['object']).columns
for col in categorical_cols:
    mode_val = train_df[col].mode()[0]  # è·å–æœ€å¸¸è§çš„å€¼
    train_df[col].fillna(mode_val, inplace=True)
    test_df[col].fillna(mode_val, inplace=True)
```

**ä¸ºä»€ä¹ˆç”¨ä¼—æ•°ï¼Ÿ**
- âœ… **ç¬¦åˆé€»è¾‘**ï¼šåˆ†ç±»ç‰¹å¾ç”¨æœ€å¸¸è§çš„ç±»åˆ«å¡«å……æœ€åˆç†
- âœ… **ä¿æŒä¸€è‡´æ€§**ï¼šè®­ç»ƒé›†å’Œæµ‹è¯•é›†ä½¿ç”¨ç›¸åŒçš„å¡«å……å€¼

**ç¤ºä¾‹**ï¼š
- `Alley`ï¼ˆå°å··ç±»å‹ï¼‰ç¼ºå¤± â†’ ç”¨ä¼—æ•° "None" å¡«å……
- `MasVnrType`ï¼ˆç Œé¢ç±»å‹ï¼‰ç¼ºå¤± â†’ ç”¨ä¼—æ•° "None" å¡«å……

### å…³é”®è®¾è®¡ç‚¹

```python
# é‡è¦ï¼šåªåœ¨è®­ç»ƒé›†ä¸Šè®¡ç®—ç»Ÿè®¡é‡ï¼Œç„¶ååº”ç”¨åˆ°æµ‹è¯•é›†
median_val = train_df[col].median()  # åªç”¨è®­ç»ƒé›†è®¡ç®—
test_df[col].fillna(median_val, inplace=True)  # åº”ç”¨åˆ°æµ‹è¯•é›†
```

**åŸå› **ï¼šé¿å…æ•°æ®æ³„éœ²ï¼ˆData Leakageï¼‰
- âŒ é”™è¯¯åšæ³•ï¼šç”¨ `pd.concat([train, test]).median()` 
- âœ… æ­£ç¡®åšæ³•ï¼šåªç”¨è®­ç»ƒé›†è®¡ç®—ï¼Œç„¶ååº”ç”¨åˆ°æµ‹è¯•é›†

---

## ğŸ¨ ç‰¹å¾å·¥ç¨‹è¯¦è§£ (`engineer_features`)

### è®¾è®¡ç†å¿µ

**ç›®æ ‡**ï¼šä»åŸå§‹ç‰¹å¾ä¸­æå–æ›´æœ‰é¢„æµ‹ä»·å€¼çš„ä¿¡æ¯

### 1. æ€»é¢ç§¯ç‰¹å¾ (`TotalSF`)

```python
out['TotalSF'] = out.get('TotalBsmtSF', 0) + out.get('1stFlrSF', 0) + out.get('2ndFlrSF', 0)
```

**æ€è·¯**ï¼š
- æˆ¿å±‹æ€»å±…ä½é¢ç§¯ = åœ°ä¸‹å®¤é¢ç§¯ + ä¸€æ¥¼é¢ç§¯ + äºŒæ¥¼é¢ç§¯
- **ä¸ºä»€ä¹ˆé‡è¦**ï¼šæ€»é¢ç§¯æ˜¯æˆ¿ä»·çš„æ ¸å¿ƒå†³å®šå› ç´ ä¹‹ä¸€

**ç¤ºä¾‹**ï¼š
- åœ°ä¸‹å®¤ 1000 sqft + ä¸€æ¥¼ 1200 sqft + äºŒæ¥¼ 800 sqft = **3000 sqft æ€»å±…ä½é¢ç§¯**

### 2. æ€»æµ´å®¤æ•° (`TotalBathrooms`)

```python
out['TotalBathrooms'] = (
    out.get('FullBath', 0) +           # å…¨æµ´å®¤
    0.5 * out.get('HalfBath', 0) +      # åŠæµ´å®¤ï¼ˆæƒé‡ 0.5ï¼‰
    out.get('BsmtFullBath', 0) +        # åœ°ä¸‹å®¤å…¨æµ´å®¤
    0.5 * out.get('BsmtHalfBath', 0)    # åœ°ä¸‹å®¤åŠæµ´å®¤
)
```

**æ€è·¯**ï¼š
- å°†ä¸åŒç±»å‹çš„æµ´å®¤ç»Ÿä¸€ä¸ºä¸€ä¸ªæ•°å€¼ç‰¹å¾
- **æƒé‡è®¾è®¡**ï¼šåŠæµ´å®¤ = 0.5 Ã— å…¨æµ´å®¤ï¼ˆç¬¦åˆå®é™…ä»·å€¼ï¼‰

**ç¤ºä¾‹**ï¼š
- 2 å…¨æµ´å®¤ + 1 åŠæµ´å®¤ + 1 åœ°ä¸‹å®¤å…¨æµ´å®¤ = **3.5 æ€»æµ´å®¤æ•°**

### 3. æ€»é—¨å»Šé¢ç§¯ (`TotalPorchSF`)

```python
out['TotalPorchSF'] = (
    out.get('OpenPorchSF', 0) +      # å¼€æ”¾å¼é—¨å»Š
    out.get('EnclosedPorch', 0) +    # å°é—­å¼é—¨å»Š
    out.get('3SsnPorch', 0) +        # ä¸‰å­£é—¨å»Š
    out.get('ScreenPorch', 0)        # çº±çª—é—¨å»Š
)
```

**æ€è·¯**ï¼šæ±‡æ€»æ‰€æœ‰é—¨å»Šç±»å‹ï¼Œåæ˜ æˆ¿å±‹çš„æˆ·å¤–ç©ºé—´ä»·å€¼

### 4. æˆ¿å±‹å¹´é¾„ç‰¹å¾

```python
if 'YrSold' in out.columns and 'YearBuilt' in out.columns:
    out['HouseAge'] = out['YrSold'] - out['YearBuilt']        # æˆ¿å±‹å¹´é¾„
    out['RemodAge'] = out['YrSold'] - out.get('YearRemodAdd', out['YearBuilt'])  # æ”¹å»ºå¹´é¾„
```

**æ€è·¯**ï¼š
- **HouseAge**ï¼šæˆ¿å±‹å»ºé€ è‡³ä»Šçš„å¹´æ•°ï¼ˆåæ˜ æˆ¿å±‹è€åŒ–ç¨‹åº¦ï¼‰
- **RemodAge**ï¼šæœ€è¿‘ä¸€æ¬¡æ”¹å»ºè‡³ä»Šçš„å¹´æ•°ï¼ˆåæ˜ æˆ¿å±‹ç»´æŠ¤çŠ¶å†µï¼‰

**ä¸ºä»€ä¹ˆé‡è¦**ï¼š
- æ–°æˆ¿é€šå¸¸æ¯”æ—§æˆ¿è´µ
- æœ€è¿‘æ”¹å»ºè¿‡çš„æˆ¿å±‹ä»·å€¼æ›´é«˜

**ç¤ºä¾‹**ï¼š
- 2020 å¹´å‡ºå”®ï¼Œ1970 å¹´å»ºé€  â†’ **HouseAge = 50 å¹´**
- 2020 å¹´å‡ºå”®ï¼Œ2015 å¹´æ”¹å»º â†’ **RemodAge = 5 å¹´**

### 5. äºŒå…ƒç‰¹å¾ï¼ˆHas* ç³»åˆ—ï¼‰

```python
out['HasBasement'] = (out['TotalBsmtSF'] > 0).astype(int)      # æ˜¯å¦æœ‰åœ°ä¸‹å®¤
out['Has2ndFloor'] = (out['2ndFlrSF'] > 0).astype(int)        # æ˜¯å¦æœ‰äºŒæ¥¼
out['HasGarage'] = (out['GarageArea'] > 0).astype(int)         # æ˜¯å¦æœ‰è½¦åº“
out['HasFireplace'] = (out['Fireplaces'] > 0).astype(int)      # æ˜¯å¦æœ‰å£ç‚‰
out['HasPool'] = (out['PoolArea'] > 0).astype(int)              # æ˜¯å¦æœ‰æ¸¸æ³³æ± 
```

**æ€è·¯**ï¼š
- å°†"æ•°é‡"ç‰¹å¾è½¬æ¢ä¸º"æ˜¯å¦å­˜åœ¨"çš„äºŒå…ƒç‰¹å¾
- **ä¸ºä»€ä¹ˆæœ‰æ•ˆ**ï¼š
  - ç®€åŒ–æ¨¡å‹ï¼šæœ‰äº›ç‰¹å¾åªéœ€è¦çŸ¥é“"æœ‰/æ— "ï¼Œä¸éœ€è¦ç²¾ç¡®æ•°é‡
  - æ•æ‰éçº¿æ€§å…³ç³»ï¼šæœ‰è½¦åº“ vs æ— è½¦åº“å¯èƒ½æ˜¯è´¨çš„åŒºåˆ«

**ç¤ºä¾‹**ï¼š
- `GarageArea = 0` â†’ `HasGarage = 0`ï¼ˆæ— è½¦åº“ï¼‰
- `GarageArea = 576` â†’ `HasGarage = 1`ï¼ˆæœ‰è½¦åº“ï¼‰

---

## ğŸ”¢ ç‰¹å¾ç¼–ç  (`encode_categorical_features`)

### ä¸ºä»€ä¹ˆéœ€è¦ç¼–ç ï¼Ÿ

æœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆå¦‚ XGBoostï¼‰åªèƒ½å¤„ç†æ•°å€¼å‹æ•°æ®ï¼Œéœ€è¦å°†åˆ†ç±»ç‰¹å¾è½¬æ¢ä¸ºæ•°å€¼ã€‚

### Label Encoding ç­–ç•¥

```python
combined = pd.concat([train_df, test_df], ignore_index=True)  # åˆå¹¶è®­ç»ƒé›†å’Œæµ‹è¯•é›†

for col in categorical_cols:
    le = LabelEncoder()
    combined[col] = le.fit_transform(combined[col].astype(str))
```

**è®¾è®¡è¦ç‚¹**ï¼š

1. **å…ˆåˆå¹¶å†ç¼–ç **
   ```python
   # âœ… æ­£ç¡®ï¼šåˆå¹¶åç»Ÿä¸€ç¼–ç 
   combined = pd.concat([train_df, test_df])
   combined['MSZoning'] = LabelEncoder().fit_transform(combined['MSZoning'])
   
   # âŒ é”™è¯¯ï¼šåˆ†åˆ«ç¼–ç ï¼ˆä¼šå¯¼è‡´ç¼–ç ä¸ä¸€è‡´ï¼‰
   train_df['MSZoning'] = LabelEncoder().fit_transform(train_df['MSZoning'])
   test_df['MSZoning'] = LabelEncoder().fit_transform(test_df['MSZoning'])
   ```

2. **ä¸ºä»€ä¹ˆåˆå¹¶ï¼Ÿ**
   - ç¡®ä¿è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä½¿ç”¨ç›¸åŒçš„ç¼–ç æ˜ å°„
   - é¿å…æµ‹è¯•é›†ä¸­å‡ºç°è®­ç»ƒé›†æœªè§çš„ç±»åˆ«

3. **Label Encoding vs One-Hot Encoding**
   ```python
   # Label Encoding: 'A'â†’0, 'B'â†’1, 'C'â†’2
   # One-Hot Encoding: 'A'â†’[1,0,0], 'B'â†’[0,1,0], 'C'â†’[0,0,1]
   ```
   - **é€‰æ‹© Label Encoding**ï¼šç±»åˆ«æ•°é‡å¤šæ—¶ï¼Œé¿å…ç‰¹å¾çˆ†ç‚¸
   - æ ‘æ¨¡å‹ï¼ˆXGBoostï¼‰å¯ä»¥å¤„ç† Label Encoding çš„åºæ•°å…³ç³»

### åˆ—å¯¹é½

```python
# ç¡®ä¿è®­ç»ƒé›†å’Œæµ‹è¯•é›†åˆ—å¯¹é½
common_cols = train_encoded.columns.intersection(test_encoded.columns)
train_encoded = train_encoded[common_cols]
test_encoded = test_encoded[common_cols]
```

**åŸå› **ï¼šç¡®ä¿é¢„æµ‹æ—¶ç‰¹å¾ç»´åº¦ä¸€è‡´

---

## ğŸ¤– æ¨¡å‹é€‰æ‹©ä¸é…ç½®

### é»˜è®¤æ¨¡å‹ï¼šXGBoost

```python
xgb.XGBRegressor(
    n_estimators=1000,        # æ ‘çš„æ•°é‡
    max_depth=6,              # æ ‘çš„æœ€å¤§æ·±åº¦
    learning_rate=0.01,       # å­¦ä¹ ç‡ï¼ˆå°æ­¥å¿«è·‘ï¼‰
    subsample=0.8,            # æ¯æ£µæ ‘ä½¿ç”¨ 80% çš„æ ·æœ¬
    colsample_bytree=0.8,     # æ¯æ£µæ ‘ä½¿ç”¨ 80% çš„ç‰¹å¾
    random_state=42,          # éšæœºç§å­ï¼ˆå¯å¤ç°ï¼‰
    n_jobs=-1,                # ä½¿ç”¨æ‰€æœ‰ CPU æ ¸å¿ƒ
    early_stopping_rounds=50, # æ—©åœï¼ˆé˜²æ­¢è¿‡æ‹Ÿåˆï¼‰
)
```

### è¶…å‚æ•°è®¾è®¡æ€è·¯

#### 1. `n_estimators=1000` + `learning_rate=0.01`
- **ç­–ç•¥**ï¼šå°å­¦ä¹ ç‡ + å¤šæ ‘æ•°é‡
- **åŸç†**ï¼šæ¢¯åº¦æå‡çš„"å°æ­¥å¿«è·‘"ç­–ç•¥ï¼Œæ›´ç¨³å®šã€æ›´ç²¾ç¡®
- **ç±»æ¯”**ï¼šèµ° 1000 å°æ­¥ vs èµ° 100 å¤§æ­¥ï¼Œå‰è€…æ›´ç²¾ç¡®

#### 2. `max_depth=6`
- **å¹³è¡¡**ï¼šæ·±åº¦å¤ªæµ…ï¼ˆå¦‚ 3ï¼‰â†’ æ¬ æ‹Ÿåˆï¼Œæ·±åº¦å¤ªæ·±ï¼ˆå¦‚ 10ï¼‰â†’ è¿‡æ‹Ÿåˆ
- **ç»éªŒå€¼**ï¼š6 æ˜¯å›å½’é—®é¢˜çš„å¸¸ç”¨æ·±åº¦

#### 3. `subsample=0.8` å’Œ `colsample_bytree=0.8`
- **ç›®çš„**ï¼šéšæœºé‡‡æ ·ï¼Œå¢åŠ æ¨¡å‹å¤šæ ·æ€§ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ
- **æ•ˆæœ**ï¼šç±»ä¼¼éšæœºæ£®æ—çš„éšæœºæ€§

#### 4. `early_stopping_rounds=50`
- **æœºåˆ¶**ï¼šå¦‚æœéªŒè¯é›†è¯¯å·®è¿ç»­ 50 è½®ä¸ä¸‹é™ï¼Œåœæ­¢è®­ç»ƒ
- **å¥½å¤„**ï¼šè‡ªåŠ¨é˜²æ­¢è¿‡æ‹Ÿåˆï¼ŒèŠ‚çœè®­ç»ƒæ—¶é—´

### å…¶ä»–æ”¯æŒçš„æ¨¡å‹

#### Random Forest
```python
RandomForestRegressor(
    n_estimators=200,      # 200 æ£µæ ‘
    max_depth=20,          # è¾ƒæ·±çš„æ ‘
    min_samples_split=5,  # èŠ‚ç‚¹æœ€å°‘ 5 ä¸ªæ ·æœ¬æ‰åˆ†è£‚
    min_samples_leaf=2,    # å¶å­èŠ‚ç‚¹æœ€å°‘ 2 ä¸ªæ ·æœ¬
)
```

#### Gradient Boosting
```python
GradientBoostingRegressor(
    n_estimators=200,
    max_depth=5,
    learning_rate=0.05,   # æ¯” XGBoost ç¨å¤§çš„å­¦ä¹ ç‡
    subsample=0.8,
)
```

---

## ğŸ¯ è®­ç»ƒç­–ç•¥

### 1. äº¤å‰éªŒè¯

```python
cv = KFold(n_splits=5, shuffle=True, random_state=42)
cv_scores = -cross_val_score(model, X_train, y_train, cv=cv, scoring=rmse_scorer_obj)
```

**è®¾è®¡æ€è·¯**ï¼š
- **5 æŠ˜äº¤å‰éªŒè¯**ï¼šå°†æ•°æ®åˆ†æˆ 5 ä»½ï¼Œæ¯æ¬¡ç”¨ 4 ä»½è®­ç»ƒï¼Œ1 ä»½éªŒè¯
- **ç›®çš„**ï¼šè¯„ä¼°æ¨¡å‹æ³›åŒ–èƒ½åŠ›ï¼Œé¿å…è¿‡æ‹Ÿåˆ
- **è¾“å‡º**ï¼š`CV RMSE: 26838.0203 Â± 6021.7735`
  - å¹³å‡å€¼ï¼š26838ï¼ˆæ¨¡å‹çš„å¹³å‡æ€§èƒ½ï¼‰
  - æ ‡å‡†å·®ï¼š6021ï¼ˆæ€§èƒ½çš„ç¨³å®šæ€§ï¼‰

**å¯è§†åŒ–**ï¼š
```
Fold 1: [è®­ç»ƒ] [è®­ç»ƒ] [è®­ç»ƒ] [è®­ç»ƒ] | [éªŒè¯]
Fold 2: [è®­ç»ƒ] [è®­ç»ƒ] [è®­ç»ƒ] | [éªŒè¯] [è®­ç»ƒ]
Fold 3: [è®­ç»ƒ] [è®­ç»ƒ] | [éªŒè¯] [è®­ç»ƒ] [è®­ç»ƒ]
Fold 4: [è®­ç»ƒ] | [éªŒè¯] [è®­ç»ƒ] [è®­ç»ƒ] [è®­ç»ƒ]
Fold 5: | [éªŒè¯] [è®­ç»ƒ] [è®­ç»ƒ] [è®­ç»ƒ] [è®­ç»ƒ]
```

### 2. XGBoost çš„ç‰¹æ®Šå¤„ç†

```python
if args.model_type == 'xgb':
    # ä½¿ç”¨éƒ¨åˆ†æ•°æ®ä½œä¸ºéªŒè¯é›†ç”¨äº early stopping
    split_idx = int(len(X_train) * 0.8)
    X_train_fit = X_train.iloc[:split_idx]
    X_val = X_train.iloc[split_idx:]
    
    model.fit(
        X_train_fit, y_train_fit,
        eval_set=[(X_val, y_val)],  # æä¾›éªŒè¯é›†
        verbose=100
    )
```

**ä¸ºä»€ä¹ˆéœ€è¦éªŒè¯é›†ï¼Ÿ**
- XGBoost çš„ `early_stopping` éœ€è¦éªŒè¯é›†æ¥åˆ¤æ–­ä½•æ—¶åœæ­¢
- ä½¿ç”¨ 80% è®­ç»ƒï¼Œ20% éªŒè¯

**Early Stopping æœºåˆ¶**ï¼š
```
è½®æ¬¡ 1: éªŒè¯ RMSE = 50000
è½®æ¬¡ 2: éªŒè¯ RMSE = 45000  â†“
è½®æ¬¡ 3: éªŒè¯ RMSE = 42000  â†“
...
è½®æ¬¡ 500: éªŒè¯ RMSE = 28000  â†“
è½®æ¬¡ 501: éªŒè¯ RMSE = 28050  â†‘ (å¼€å§‹ä¸Šå‡ï¼Œè¿‡æ‹Ÿåˆ)
è½®æ¬¡ 502: éªŒè¯ RMSE = 28100  â†‘
...
è½®æ¬¡ 550: éªŒè¯ RMSE = 28500  â†‘ (è¿ç»­ 50 è½®ä¸ä¸‹é™)
â†’ åœæ­¢è®­ç»ƒï¼Œä½¿ç”¨ç¬¬ 500 è½®çš„æ¨¡å‹
```

### 3. æœ€ç»ˆæ¨¡å‹è®­ç»ƒ

```python
# åœ¨å®Œæ•´è®­ç»ƒé›†ä¸Šè®­ç»ƒæœ€ç»ˆæ¨¡å‹
model.fit(X_train, y_train)
```

**ä¸ºä»€ä¹ˆç”¨å…¨éƒ¨æ•°æ®ï¼Ÿ**
- äº¤å‰éªŒè¯åªæ˜¯è¯„ä¼°ï¼Œæœ€ç»ˆæ¨¡å‹è¦ç”¨å…¨éƒ¨æ•°æ®è®­ç»ƒ
- æ›´å¤šæ•°æ® = æ›´å¥½çš„æ¨¡å‹æ€§èƒ½

---

## ğŸ“Š é¢„æµ‹ä¸åå¤„ç†

### 1. ç”Ÿæˆé¢„æµ‹

```python
test_pred = model.predict(X_test)
```

### 2. åå¤„ç†ï¼šç¡®ä¿é¢„æµ‹å€¼ä¸ºæ­£

```python
test_pred = np.maximum(test_pred, 0)  # æˆ¿ä»·ä¸èƒ½ä¸ºè´Ÿ
```

**åŸå› **ï¼š
- æˆ¿ä»·åœ¨ç‰©ç†ä¸Šä¸å¯èƒ½ä¸ºè´Ÿ
- æ¨¡å‹å¶å°”å¯èƒ½é¢„æµ‹å‡ºè´Ÿå€¼ï¼ˆç‰¹åˆ«æ˜¯æç«¯æƒ…å†µï¼‰

### 3. ç”Ÿæˆæäº¤æ–‡ä»¶

```python
submission = pd.DataFrame({
    'Id': test_id,
    'SalePrice': test_pred
})
submission.to_csv(args.submission, index=False)
```

**Kaggle æäº¤æ ¼å¼**ï¼š
```csv
Id,SalePrice
1461,124344.92
1462,159076.88
...
```

---

## ğŸ›ï¸ ä»£ç ç»“æ„åˆ†æ

### ä¸»è®­ç»ƒè„šæœ¬ (`train.py`)

**å‡½æ•°èŒè´£åˆ’åˆ†**ï¼š

1. **`rmse_scorer(y_true, y_pred)`**
   - è®¡ç®— RMSEï¼ˆRoot Mean Squared Errorï¼‰
   - Kaggle ç«èµ›çš„è¯„ä¼°æŒ‡æ ‡

2. **`build_model(model_type, random_state)`**
   - å·¥å‚å‡½æ•°ï¼šæ ¹æ®ç±»å‹åˆ›å»ºæ¨¡å‹
   - æ”¯æŒï¼šxgb, rf, gbr, stacking

3. **`main()`**
   - ä¸»æµç¨‹æ§åˆ¶
   - å‚æ•°è§£æã€æ•°æ®åŠ è½½ã€è®­ç»ƒã€é¢„æµ‹

### æ•°æ®å¤„ç†æ¨¡å— (`data_processing.py`)

**å‡½æ•°èŒè´£åˆ’åˆ†**ï¼š

1. **`fill_missing_values(train_df, test_df)`**
   - ç¼ºå¤±å€¼å¡«å……ç­–ç•¥

2. **`engineer_features(df)`**
   - ç‰¹å¾å·¥ç¨‹ï¼šåˆ›å»ºæ–°ç‰¹å¾

3. **`encode_categorical_features(train_df, test_df)`**
   - åˆ†ç±»ç‰¹å¾ç¼–ç 

4. **`prepare_data(train_df, test_df, target_col)`**
   - æ€»å…¥å£ï¼šåè°ƒæ‰€æœ‰é¢„å¤„ç†æ­¥éª¤

---

## ğŸ’¡ è®¾è®¡äº®ç‚¹æ€»ç»“

### âœ… ä¼˜ç‚¹

1. **æ¸…æ™°çš„æµç¨‹**ï¼šæ¯ä¸ªæ­¥éª¤éƒ½æœ‰æ˜ç¡®çš„ç›®çš„
2. **ç¨³å¥çš„å¤„ç†**ï¼šå¤„ç†ç¼ºå¤±å€¼ã€å¼‚å¸¸å€¼ã€åˆ—å¯¹é½
3. **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒå¤šç§æ¨¡å‹ç±»å‹
4. **é¿å…æ•°æ®æ³„éœ²**ï¼šåªåœ¨è®­ç»ƒé›†ä¸Šè®¡ç®—ç»Ÿè®¡é‡
5. **å®ç”¨æ€§å¼º**ï¼šç›´æ¥ç”Ÿæˆ Kaggle æäº¤æ–‡ä»¶

### âš ï¸ å¯ä»¥æ”¹è¿›çš„åœ°æ–¹

1. **ç‰¹å¾å·¥ç¨‹**ï¼šå¯ä»¥æ·»åŠ æ›´å¤šäº¤äº’ç‰¹å¾ã€å¤šé¡¹å¼ç‰¹å¾
2. **ç¼ºå¤±å€¼å¤„ç†**ï¼šå¯ä»¥é’ˆå¯¹ä¸åŒç‰¹å¾ä½¿ç”¨ä¸åŒç­–ç•¥
3. **å¼‚å¸¸å€¼å¤„ç†**ï¼šå¯ä»¥æ£€æµ‹å¹¶ç§»é™¤æç«¯å€¼
4. **ç›®æ ‡å˜é‡è½¬æ¢**ï¼šå¯ä»¥å°è¯• log è½¬æ¢å‡å°‘åæ€
5. **æ¨¡å‹é›†æˆ**ï¼šå¯ä»¥ä½¿ç”¨ Stacking æˆ– Blending

---

## ğŸ“ˆ æ€§èƒ½è¡¨ç°

**åŸºç¡€ç‰ˆæœ¬ç»“æœ**ï¼š
- CV RMSE: **26,838 Â± 6,022**
- è®­ç»ƒé›† RMSE: **12,760**
- ç‰¹å¾æ•°é‡: **89 ä¸ª**

**åˆ†æ**ï¼š
- è®­ç»ƒé›† RMSE (12,760) < CV RMSE (26,838)
  - è¯´æ˜å­˜åœ¨ä¸€å®šè¿‡æ‹Ÿåˆ
  - ä½†è¿™æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºæ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°æ›´å¥½

---

## ğŸ“ å­¦ä¹ è¦ç‚¹

1. **æ•°æ®æ³„éœ²é¢„é˜²**ï¼šæ°¸è¿œåªåœ¨è®­ç»ƒé›†ä¸Šè®¡ç®—ç»Ÿè®¡é‡
2. **ç‰¹å¾å·¥ç¨‹ä»·å€¼**ï¼šå¥½çš„ç‰¹å¾å·¥ç¨‹æ¯”å¤æ‚æ¨¡å‹æ›´é‡è¦
3. **äº¤å‰éªŒè¯é‡è¦æ€§**ï¼šCV åˆ†æ•°æ¯”è®­ç»ƒé›†åˆ†æ•°æ›´å¯é 
4. **æ—©åœæœºåˆ¶**ï¼šé˜²æ­¢è¿‡æ‹Ÿåˆçš„æœ‰æ•ˆæ–¹æ³•
5. **åå¤„ç†**ï¼šç¡®ä¿é¢„æµ‹å€¼ç¬¦åˆä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚éè´Ÿï¼‰

---

**æ€»ç»“**ï¼šåŸå§‹ç‰ˆæœ¬è™½ç„¶ç®€å•ï¼Œä½†åŒ…å«äº†æœºå™¨å­¦ä¹ é¡¹ç›®çš„åŸºæœ¬è¦ç´ ï¼Œæ˜¯å­¦ä¹ çš„å¥½èµ·ç‚¹ï¼




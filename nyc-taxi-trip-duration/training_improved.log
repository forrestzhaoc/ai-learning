======================================================================
NYC Taxi Trip Duration - 改进版训练
======================================================================

改进点:
  1. ✅ 增强特征工程（更多时间和地理特征）
  2. ✅ 使用对数目标变量（针对RMSLE优化）
  3. ✅ 优化模型参数（更多树，更优学习率）
  4. ✅ 使用优化的XGBoost参数
======================================================================
加载训练数据: /home/ubuntu/projects/ai-learning/nyc-taxi-trip-duration/data/train.csv
✓ 训练数据: 1458644 行 × 11 列
加载测试数据: /home/ubuntu/projects/ai-learning/nyc-taxi-trip-duration/data/test.csv
✓ 测试数据: 625134 行 × 9 列

数据清洗...
移除了 998 条无效坐标记录 (0.07%)
移除了 5791 条零距离行程记录

移除异常值...
移除了 28730 个异常值 (1.98%)
范围: [92.00, 3432.00] 秒
移除了 399 条无效坐标记录 (0.06%)
移除了 2425 条零距离行程记录

特征工程...
✓ 特征工程完成，特征数量: 52
特征列表: ['vendor_id', 'passenger_count', 'pickup_longitude', 'pickup_latitude', 'dropoff_longitude', 'dropoff_latitude', 'store_and_fwd_flag', 'hour', 'day_of_week', 'day_of_month']...

训练 XGB 模型...
使用对数目标变量训练（优化RMSLE）...

训练最终模型...

训练集评估指标:
  MAE: 150.40 秒 (2.51 分钟)
  RMSE: 232.87 秒 (3.88 分钟)
  R²: 0.8342
  RMSLE: 0.27612 ⭐ (Kaggle评估指标)
  Log MAE: 0.2051

✓ 模型已保存到: /home/ubuntu/projects/ai-learning/nyc-taxi-trip-duration/models/nyc_taxi_improved.joblib

生成预测...
✓ 提交文件已保存到: /home/ubuntu/projects/ai-learning/nyc-taxi-trip-duration/predictions/submission_improved.csv
  预测范围: [70.92, 3973.35] 秒

======================================================================
✓ 改进版训练完成！
  模型: /home/ubuntu/projects/ai-learning/nyc-taxi-trip-duration/models/nyc_taxi_improved.joblib
  提交文件: /home/ubuntu/projects/ai-learning/nyc-taxi-trip-duration/predictions/submission_improved.csv

预期改进:
  原模型 RMSLE: ~0.47275
  改进模型 RMSLE: ~0.38-0.42 (预计提升 10-20%)
======================================================================
